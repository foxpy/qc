set(RUNTIME_OUTPUT_DIRECTORY tests)

function(qc_add_test target)
    add_executable(${target} ${target}.c)
    target_link_libraries(${target} PUBLIC qc)
    add_test(NAME ${target} COMMAND ${target})
endfunction()

function(qc_add_failing_test target)
    qc_add_test(${target})
    set_tests_properties(${target} PROPERTIES WILL_FAIL ON)
endfunction()

qc_add_failing_test(qc-die-fails)
qc_add_test(qc-emalloc-usable)
qc_add_test(qc-erealloc-usable)
qc_add_test(qc-assert-success)
qc_add_failing_test(qc-assert-fails-constant)
qc_add_failing_test(qc-assert-fails-negation)
qc_add_failing_test(qc-assert-fails-cake)
qc_add_test(qc-random-works)
qc_add_test(qc-random-range-works)
