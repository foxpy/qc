set(RUNTIME_OUTPUT_DIRECTORY tests)

function(qc_add_test target)
    add_executable(${target} ${target}.c)
    target_link_libraries(${target} PUBLIC qc)
    add_test(NAME ${target} COMMAND ${target})
endfunction()

function(qc_add_failing_test target)
    qc_add_test(${target})
    set_tests_properties(${target} PROPERTIES WILL_FAIL ON)
endfunction()

qc_add_test(qc-emalloc-usable)
qc_add_test(qc-erealloc-usable)
qc_add_test(qc-assert-success)
qc_add_failing_test(qc-assert-fails-constant)
qc_add_failing_test(qc-assert-fails-negation)
qc_add_failing_test(qc-assert-fails-cake)
qc_add_test(qc-random-works)
qc_add_test(qc-random-range-works)
qc_add_test(qc-random-seed)
qc_add_test(qc-gcd)
qc_add_test(qc-lcm)
qc_add_test(qc-min)
qc_add_test(qc-max)
qc_add_test(qc-sprintf-alloc-works)
qc_add_test(qc-args-help)
qc_add_test(qc-args-flag)
qc_add_test(qc-args-numerical)
qc_add_test(qc-args-string)
qc_add_test(qc-args-positional)
qc_add_test(qc-args-mixed)
qc_add_test(qc-args-help-short)
qc_add_test(qc-args-custom-help)
